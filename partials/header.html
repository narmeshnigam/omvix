<!-- Omvix Website Header -->
<header id="site-header" role="banner" style="position: fixed; top: 0; left: 0; width: 100%; background: #FFF8F0; z-index: 1000; transition: all 0.3s ease-in-out; font-family: 'Inter', sans-serif;">
  <div class="header-inner" style="max-width: 1280px; margin: auto; padding: 24px 48px; display: flex; align-items: center; justify-content: space-between; position: relative;">
    
    <!-- Logo -->
    <div class="logo">
      <img src="/assets/images/omvix_logo.png" alt="Omvix Logo" style="height: 48px;" />
    </div>

    <!-- Desktop Navigation -->
    <nav class="desktop-nav" role="navigation" aria-label="Main menu" style="display: flex; gap: 32px; font-weight: 600; font-size: 18px; overflow: hidden;">
      <div class="nav-links" style="display: flex; gap: 32px; white-space: nowrap;">
        <a href="/index.html">Home</a>
        <a href="/solutions.html">Solutions</a>
        <a href="/projects.html">Projects</a>
        <a href="/learn.html">Learn</a>
        <a href="/homeowners.html">For Homeowners</a>
        <a href="/professionals.html">For Professionals</a>
        <a href="/contact.html">Contact</a>
      </div>
      <div class="more-dropdown" style="position: relative; display: none;">
        <button style="background: none; border: none; font-weight: 600; cursor: pointer; color: #E25822;">More â–¾</button>
        <ul class="more-menu" style="display: none; position: absolute; top: 100%; left: 0; background: #FFF8F0; list-style: none; margin: 0; padding: 12px 0; box-shadow: 0 4px 8px rgba(0,0,0,0.1); z-index: 1000;">
        </ul>
      </div>
    </nav>

    <!-- CTA Buttons -->
    <div class="cta-buttons" style="display: flex; align-items: center; gap: 16px;">
      <a href="/book-demo.html" class="btn cta-desktop" style="background: #FFB347; color: #3B1F0F; padding: 12px 24px; border-radius: 12px; font-weight: 600; text-decoration: none; transition: all 0.3s ease;">Book a Demo</a>
      <a class="cta-desktop" href="https://wa.me/919876543210?text=Hi, I'm interested in Omvix smart home automation." target="_blank" aria-label="WhatsApp Contact">
        <img src="/assets/images/whatsapp.svg" alt="WhatsApp" style="height: 24px; width: 24px;">
      </a>
    </div>

    <!-- Hamburger Icon -->
    <div class="mobile-menu-icon" onclick="toggleMobileMenu()" aria-label="Toggle navigation menu" style="display: none; position: absolute; right: 24px; top: 24px; cursor: pointer;">
      <img src="/assets/hamburger-icon.svg" alt="Menu" style="height: 24px;">
    </div>
  </div>
</header>

<!-- Mobile Menu Overlay -->
<div id="drawer-overlay" onclick="toggleMobileMenu()" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 9998;"></div>

<!-- Mobile Drawer -->
<div id="mobile-drawer" role="navigation" aria-label="Mobile menu" style="position: fixed; top: 0; right: 0; width: 280px; height: 100vh; background-color: #FFF8F0; padding: 24px; font-size: 18px; color: #E25822; z-index: 9999; transform: translateX(100%); transition: transform 0.3s ease-in-out; overflow-y: auto;">
  <nav style="display: flex; flex-direction: column; gap: 16px;">
    <a href="/index.html">Home</a>
    <a href="/solutions.html">Solutions</a>
    <a href="/projects.html">Projects</a>
    <a href="/learn.html">Learn</a>
    <a href="/homeowners.html">For Homeowners</a>
    <a href="/professionals.html">For Professionals</a>
    <a href="/contact.html">Contact</a>
    <a href="/book-demo.html" class="btn" style="margin-top: 16px; background-color: #FFB347; color: #3B1F0F; padding: 12px 24px; border-radius: 12px; text-align: center; text-decoration: none; font-weight: 600;">Book a Demo</a>
    <a href="https://wa.me/919876543210?text=Hi, I'm interested in Omvix smart home automation." target="_blank" aria-label="Chat on WhatsApp" style="margin-top: auto;">
      <img src="/assets/images/whatsapp.svg" alt="WhatsApp" style="height: 24px; width: 24px;">
    </a>
  </nav>
</div>

<!-- Floating WhatsApp -->
<a class="floating-whatsapp" href="https://wa.me/919876543210?text=Hi, I'm interested in Omvix smart home automation." target="_blank" aria-label="Chat on WhatsApp" style="position: fixed; bottom: 24px; right: 24px; z-index: 1000;">
  <img src="/assets/images/whatsapp.svg" alt="WhatsApp" style="height: 48px; width: 48px; border-radius: 50%; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
</a>

<!-- CSS -->
<style>
  .desktop-nav a {
    color: #E25822;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .desktop-nav a:hover {
    color: #FFB347;
    text-decoration: underline;
  }

  .more-menu a {
    display: block;
    padding: 8px 24px;
    color: #E25822;
    text-decoration: none;
    white-space: nowrap;
  }

  .more-menu a:hover {
    background: #FFE6D5;
  }

  #site-header.shrink .header-inner {
    padding-top: 12px !important;
    padding-bottom: 12px !important;
  }

  @media (max-width: 768px) {
    .desktop-nav {
      display: none !important;
    }

    .mobile-menu-icon {
      display: block !important;
    }

    .header-inner {
      padding: 16px 24px !important;
    }

    .cta-desktop {
      display: none !important;
    }

    .logo img {
      height: 36px !important;
    }

    #site-header {
      transition: opacity 0.3s ease;
    }

    #site-header.hidden {
      opacity: 0;
      pointer-events: none;
    }
  }

  #mobile-drawer.open {
    transform: translateX(0);
  }

  .more-dropdown:hover .more-menu {
    display: block;
  }

  body.menu-open {
    overflow: hidden;
  }
</style>

<!-- JS -->
<script>
  function toggleMobileMenu() {
    const drawer = document.getElementById('mobile-drawer');
    const overlay = document.getElementById('drawer-overlay');
    const isOpen = drawer.classList.contains('open');

    drawer.classList.toggle('open');
    overlay.style.display = isOpen ? 'none' : 'block';
    document.body.classList.toggle('menu-open', !isOpen);
  }

  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape') {
      document.getElementById('mobile-drawer').classList.remove('open');
      document.getElementById('drawer-overlay').style.display = 'none';
      document.body.classList.remove('menu-open');
    }
  });

  document.addEventListener('click', function (e) {
    const drawer = document.getElementById('mobile-drawer');
    const overlay = document.getElementById('drawer-overlay');
    const icon = document.querySelector('.mobile-menu-icon');

    if (!drawer.contains(e.target) && !icon.contains(e.target)) {
      drawer.classList.remove('open');
      overlay.style.display = 'none';
      document.body.classList.remove('menu-open');
    }
  });

  window.addEventListener('scroll', function () {
    const header = document.getElementById('site-header');
    const isMobile = window.innerWidth <= 768;

    // Always shrink on scroll
    header.classList.toggle('shrink', window.scrollY > 50);

    // On mobile only: fade out on scroll down, fade in on scroll up
    if (!isMobile) {
      header.classList.remove('hidden');
      return;
    }

    const currentScroll = window.scrollY || document.documentElement.scrollTop;
    window.lastScrollTop = window.lastScrollTop || 0;

    if (currentScroll > window.lastScrollTop) {
      header.classList.add('hidden'); // Scrolling down
    } else {
      header.classList.remove('hidden'); // Scrolling up
    }

    window.lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
  });

  // Dynamic "More" menu handling
  window.addEventListener('load', manageOverflowMenu);
  window.addEventListener('resize', manageOverflowMenu);

  function manageOverflowMenu() {
    const nav = document.querySelector('.desktop-nav');
    const navLinks = nav.querySelector('.nav-links');
    const links = Array.from(navLinks.children);
    const moreDropdown = nav.querySelector('.more-dropdown');
    const moreMenu = nav.querySelector('.more-menu');

    // Reset
    links.forEach(link => link.style.display = 'inline-flex');
    moreMenu.innerHTML = '';
    moreDropdown.style.display = 'none';

    const navWidth = nav.offsetWidth;
    let usedWidth = moreDropdown.offsetWidth;

    for (let i = 0; i < links.length; i++) {
      const link = links[i];
      usedWidth += link.offsetWidth + 32;

      if (usedWidth > navWidth - 50) {
        moreDropdown.style.display = 'block';
        moreMenu.appendChild(link.cloneNode(true));
        link.style.display = 'none';
      }
    }
  }
</script>
